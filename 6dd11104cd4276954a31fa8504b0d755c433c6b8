Revision: 6dd11104cd4276954a31fa8504b0d755c433c6b8
Patch-set: 3
File: /COMMIT_MSG

14
Fri Apr 11 01:32:31 2014 +0000
Author: Ying Wang <1003981@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 79b7df4c_5370f6ab
Bytes: 793
Something I am not clear: For unbundled apps, we use those flags to determine the abi of the embedded shared libraries; but for apps bundled in the system image,  the libraries are installed separately to /system/lib (in Android.mk we use LOCAL_REQUIRED_MODULES instead of LOCAL_JNI_SHARED_LIBRARIES) - how the apk (or runtime) knows whether to load the 32-bit libs or the 64-bit libs?
With LOCAL_REQUIRED_MODULES the dependency will be established only after all the Android.mks are loaded, so this change seems not enough. We need to change how required module names are explained in build/core/main.mk too.
(The framework team was talking about bundling apks with embedded JNI libraries in system.img and release the libs when the apk is run the first time. That would make things simpler.)

File: core/package.mk

18
Fri Apr 11 01:32:31 2014 +0000
Author: Ying Wang <1003981@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 99b2d35a_d40972fa
Bytes: 138
This doesn't work for 32-bit build if "LOCAL_MULTILIB := first".
We only want to convert "first" to "none" if it's TARGET_2ND_ARCH is set.

19
Fri Apr 11 01:32:31 2014 +0000
Author: Ying Wang <1003981@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 79b7df4c_3315725b
Bytes: 135
The default behavior (neither is set) changed here: previously it defaults to 64-bit. From your commit message it seems to be intended.

